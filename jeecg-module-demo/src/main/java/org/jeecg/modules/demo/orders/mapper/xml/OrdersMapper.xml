<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.jeecg.modules.demo.orders.mapper.OrdersMapper">
    <select id="queryUserByID" resultType="org.jeecg.modules.demo.orders.entity.Users">
        SELECT user_id, SUM(order_amount) AS total_order_amount, SUM(refund_amount) AS total_refund_amount
        FROM orders
        WHERE user_id = #{userId}
        GROUP BY user_id;
    </select>
    <select id="getUsersList" resultType="org.jeecg.modules.demo.orders.entity.Users">
        SELECT DISTINCT user_id, SUM(order_amount) AS total_order_amount, SUM(refund_amount) AS total_refund_amount
        FROM orders
        <if test="userId != ''">
            WHERE user_id like '%${userId}%'
        </if>
        GROUP BY user_id
          ${ew.customSqlSegment}
    </select>
</mapper>